slice:
  id: SP_004
  name: "Phase 3 — RAG + Generate (F03-RAG)"
  started: 2026-02-24
  target: 2026-03-14
  goal: >
    Volledige RAG + generatie pipeline: hybrid retrieval (BM25 + dense, RRF),
    HyDE query expansion, context assembler (relevantie scoring, conflict detectie,
    token budget), LiteLLM client wrapper, prompt templates met <context> tags,
    output writer met footnote attributie, en foundry generate CLI command.

workitems:
  - id: WI_0024
    title: "Retriever — hybrid BM25 + dense vector search met Reciprocal Rank Fusion"
    type: digital
    status: pending
    branch: wi/WI_0024-retriever
    depends_on: [WI_0023]

  - id: WI_0024a
    title: "HyDE query expansion (LLM hypothetisch antwoord als query vector)"
    type: digital
    status: pending
    branch: wi/WI_0024-retriever
    depends_on: [WI_0024]

  - id: WI_0025
    title: "Context assembler — relevantie scoring, conflict detectie, token budget"
    type: digital
    status: pending
    branch: wi/WI_0025-context-assembler
    depends_on: [WI_0024a]

  - id: WI_0026
    title: "LiteLLM client wrapper (retry, backoff, API key validatie)"
    type: digital
    status: pending
    branch: wi/WI_0026-llm-client
    depends_on: []

  - id: WI_0027
    title: "Prompt templates (system prompt, <context> tags, token budget validatie)"
    type: digital
    status: pending
    branch: wi/WI_0027-prompt-templates
    depends_on: [WI_0025, WI_0026]

  - id: WI_0028
    title: "Output writer (footnote bronattributie, output path validatie, overwrite guard)"
    type: digital
    status: pending
    branch: wi/WI_0028-output-writer
    depends_on: [WI_0027]

  - id: WI_0029
    title: "foundry generate CLI command"
    type: digital
    status: pending
    branch: wi/WI_0029-generate-cli
    depends_on: [WI_0028]

metrics:
  velocity_target: 7
  completed_this_slice: 0
  carry_over_previous: 0
